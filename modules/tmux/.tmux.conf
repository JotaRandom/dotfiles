# ==============================================================
# ~/.tmux.conf – tmux con apariencia retro (DOS + Windows 95)
# Explicación breve:
# - Este archivo personaliza colores y comportamiento de tmux para darle una
#   estética retro (paneles tipo consola negra y barra como Win95).
# - Compatible con xterm y respetará las definiciones de color de .Xresources
# - Los comentarios conservan ejemplos y la configuración no cambia el comportamiento
#   estándar de tmux salvo las opciones de estilo. Puedes activar/desactivar secciones.
# ==============================================================

# --------------------------------------------------------------
# 1. COLORES: qué representan y cómo ajustarlos
# - pane-* : controla los bordes y estilo de los paneles
# - status-* : controla el fondo y primer plano de la barra de estado
# - window-status-* : estilo para ventanas (activas/inactivas)
# --------------------------------------------------------------
# Paneles activos: fondo negro, texto verde fosforescente (como xterm DOS)
set -g pane-border-style        fg=green,bg=black
set -g pane-active-border-style fg=brightgreen,bg=black

# Barra de estado: gris plata (como ventanas Win95)
set -g status-style             bg='#c0c0c0',fg=black

# Ventana activa en barra: azul marino (como título activo en twm)
set -g window-status-current-style bg='#000080',fg=white,bold

# Ventana inactiva: gris claro
set -g window-status-style      bg='#dfdfdf',fg=black

# Mensajes: fondo blanco, texto negro
set -g message-style            bg=white,fg=black

# Reloj: formato 12h como en Win95
set -g clock-mode-style 12

# --------------------------------------------------------------
# 2. BARRA DE ESTADO (status bar): información visible en la parte inferior
# - status-left -> información a la izquierda (sesión, índice, nombre de ventana)
# - status-right -> información a la derecha (hora, fecha, carga)
# - status-interval -> cada cuántos segundos se actualiza
# --------------------------------------------------------------
set -g status on
set -g status-interval 1
set -g status-justify centre

# Izquierda: [Ventana] Nombre sesión
set -g status-left  " #S #[fg=black,bg='#c0c0c0']#[fg=white,bg='#000080'] #I:#W #[default]"

# Derecha: Hora | Carga | Fecha
set -g status-right "#[fg='#000080',bg='#c0c0c0']#[fg=white,bg='#000080'] %H:%M #[fg=black]#[fg=white,bg='#808080'] %Y-%m-%d "

# Longitud
set -g status-left-length  30
set -g status-right-length 50

# --------------------------------------------------------------
# 3. PANE ACTUAL (como ventana activa en Win95)
# --------------------------------------------------------------
set -g window-style        'bg=black,fg=green'
set -g window-active-style 'bg=black,fg=brightgreen'

# --------------------------------------------------------------
# 4. ATAJOS DE TECLADO
# - Prefijo: C-b (predeterminado). Mantengo el prefijo clásico para compat.
# - Los atajos extra (ej. Alt+F4 o Alt+Tab) pueden interferir con algunos gestores
#   de ventanas; si ves comportamiento extraño, desactiva o reasigna estos binds.
# --------------------------------------------------------------
# Prefijo: Ctrl+B (por defecto), pero agregamos Win95-like
set -g prefix C-b

# Alt + F4 = Cerrar panel
bind -n M-F4 kill-pane

# Alt + Tab = Cambiar panel
bind -n M-Tab select-pane -t :.+

# Ctrl + Alt + N = Nueva ventana (como Ctrl+N en Win95)
bind -n C-M-n new-window

# Alt + Espacio = Menú de tmux (como menú Inicio)
bind -n M-Space choose-tree

# --------------------------------------------------------------
# 5. COMPORTAMIENTO GENERAL
# --------------------------------------------------------------
set -g mouse on                    # Ratón como en Win95
set -g history-limit 10000
set -g base-index 1                # Ventanas desde 1
set -g pane-base-index 1
setw -g aggressive-resize on

# Renombrar ventanas automáticamente
setw -g automatic-rename on
set -g set-titles on
set -g set-titles-string "#T"

## 6. MODO DE COPIADO (estilo vi) — útil si copias/pegas con teclas parecidas a vim
## - Activamos 'copy-mode-vi' y mapeamos 'v' para iniciar selección,
##   y 'y' para copiar al portapapeles (usa xclip en este ejemplo en Linux)
## - Si usas otro clip tool (wl-copy, pbcopy), adapta la línea
## --------------------------------------------------------------
setw -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# --------------------------------------------------------------
# SOPORTE LATINO (ñ, acentos, ¿¡) en tmux
# --------------------------------------------------------------
set -g status-utf8 on
setw -g utf8 on

# Forzar codificación en paneles
set -gq @pane-utf8 on

# Entrada de acentos
bind -n M-Dead send-keys dead_acute
bind -n M-~ send-keys ntilde

# Forzar UTF-8 en tmux
set -g status-utf8 on
setw -g utf8 on
set -q -g status-utf8 on
set -q -g utf8 on

# Terminal con soporte UTF-8 real
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"
