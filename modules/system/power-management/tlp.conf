# TLP 1.9.0 Configuration - ThinkPad L420
# /etc/tlp.conf
# Optimizado para balance entre rendimiento y batería

# ===== OPERACIÓN GENERAL =====
TLP_ENABLE=1
TLP_DEFAULT_MODE=AC
TLP_PERSISTENT_DEFAULT=0

# ===== PERFILES DE ENERGÍA POR FUENTE =====
# CPU_SCALING_GOVERNOR: ondemand es el mejor balance para L420
CPU_SCALING_GOVERNOR_ON_AC=ondemand
CPU_SCALING_GOVERNOR_ON_BAT=powersave

# CPU Energy/Performance Policies (si está disponible)
CPU_ENERGY_PERF_POLICY_ON_AC=balance_performance
CPU_ENERGY_PERF_POLICY_ON_BAT=balance_power

# CPU Boost (Turbo)
CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=0

# Freq min/max (L420 tiene CPU Sandy Bridge ~2.4GHz)
CPU_SCALING_MIN_FREQ_ON_AC=800000
CPU_SCALING_MAX_FREQ_ON_AC=2400000
CPU_SCALING_MIN_FREQ_ON_BAT=800000
CPU_SCALING_MAX_FREQ_ON_BAT=1600000

# ===== I/O SCHEDULERS =====
# Para SSD: deadline o noop/none
# Para HDD: mq-deadline o cfq
DISK_IOSCHED="mq-deadline"

# ===== DISCOS DUROS =====
# APM (Advanced Power Management) para HDD
# 128 = balance, 254 = máximo rendimiento, 1 = máximo ahorro
DISK_APM_LEVEL_ON_AC="254 254"
DISK_APM_LEVEL_ON_BAT="128 128"

# Spindown timeout (0 = deshabilitado)
DISK_SPINDOWN_TIMEOUT_ON_AC="0 0"
DISK_SPINDOWN_TIMEOUT_ON_BAT="0 0"

# ===== GRÁFICOS (Intel) =====
# L420 tiene Intel HD Graphics (Sandy Bridge)
INTEL_GPU_MIN_FREQ_ON_AC=0
INTEL_GPU_MIN_FREQ_ON_BAT=0
INTEL_GPU_MAX_FREQ_ON_AC=0
INTEL_GPU_MAX_FREQ_ON_BAT=0
INTEL_GPU_BOOST_FREQ_ON_AC=0
INTEL_GPU_BOOST_FREQ_ON_BAT=0

# ===== WIFI =====
# Power saving para WiFi
WIFI_PWR_ON_AC=off
WIFI_PWR_ON_BAT=on

# ===== AUDIO =====
SOUND_POWER_SAVE_ON_AC=0
SOUND_POWER_SAVE_ON_BAT=1
SOUND_POWER_SAVE_CONTROLLER=Y

# ===== PCIe ASPM =====
# Active State Power Management
PCIE_ASPM_ON_AC=performance
PCIE_ASPM_ON_BAT=powersave

# ===== RUNTIME POWER MANAGEMENT =====
RUNTIME_PM_ON_AC=on
RUNTIME_PM_ON_BAT=auto

# Blacklist para devices problemáticos
#RUNTIME_PM_DRIVER_BLACKLIST="mei_me nouveau radeon"

# ===== USB AUTOSUSPEND =====
USB_AUTOSUSPEND=1
USB_BLACKLIST_PHONE=0
USB_BLACKLIST_PRINTER=1
USB_BLACKLIST_WWAN=0

# Whitelist para devices específicos
#USB_WHITELIST="1234:5678"

# ===== THINKPAD SPECIFICS =====
# Battery thresholds para ThinkPad (alargar vida de batería)
# L420 soporta estos valores
START_CHARGE_THRESH_BAT0=75
STOP_CHARGE_THRESH_BAT0=80

# ===== RESTAURAR AL REINICIAR =====
RESTORE_DEVICE_STATE_ON_STARTUP=0

# ===== TRACE MODE (debug) =====
TLP_DEBUG=""
